<!-- <div>
    @for (post of this.getPosts(); track post.id) {
        <app-post [post]="post"></app-post>
    }
    <button (click)="this.toggleForm()">toggle</button>

    @if (this.shouldShowCreationForm) {
        <div class="container">
        <h2>Create New Post</h2>
        <form  class="form">
            <label for="postTitle">Title:</label>
            <input [(ngModel)]="newPost.title" type="text" id="postTitle" name="title" placeholder="Enter post title" required>

            <label for="postTags">Tags (comma-separated):</label>
            <input [(ngModel)]="newPost.tags" type="text" id="postTags" name="tags" placeholder="e.g., event, fun, community">

            <label for="postLocation">Location:</label>
            <input [(ngModel)]="newPost.location" type="text" id="postLocation" name="location" placeholder="e.g., Central Park, Online">

            <label for="postDescription">Description:</label>
            <textarea [(ngModel)]="newPost.description" id="postDescription" name="description" placeholder="Tell us more about your post..." rows="5"></textarea>

            <div class="checkbox-group">
                <input [(ngModel)]="newPost.open_to_join" type="checkbox" id="postOpenToJoin" name="open_to_join">
                <label for="postOpenToJoin">Open to Join</label>
            </div>

            <button (click)="this.createPost()">Create Post</button>
        </form>
        <div id="formMessage" class="form-message"></div>
    </div>
    }
</div> -->
<div class="page-wrapper">

<div class="post-grid">
    @for (post of this.getPosts(); track post.id) {
        <app-post [post]="post"></app-post>
    }
</div>

    <button class="toggle-btn" (click)="this.toggleForm()">Create an Event</button>

    @if (this.shouldShowCreationForm) {
        <div class="modal-overlay" (click)="this.toggleForm()"></div>
        <div class="modal">
            <h2>Create New Post</h2>
            <form class="form" (click)="$event.stopPropagation()">

                <label for="postTitle">Title:</label>
                <input [(ngModel)]="newPost.title" type="text" id="postTitle" name="title" required>

                <label for="postTags">Tags:</label>
                <input [(ngModel)]="newPost.tags" type="text" id="postTags" name="tags">                <label for="postLocation">Location:</label>
                <div class="location-search-container">                    <input [(ngModel)]="newPost.location" 
                           type="text" 
                           id="postLocation" 
                           name="location" 
                           placeholder="Adresse eingeben (mindestens 3 Zeichen)..." 
                           (input)="searchAddress(newPost.location ?? '')"
                           [class.with-suggestions]="addressSuggestions.length > 0"
                           autocomplete="off">
                    
                    <!-- Ladeindikator -->
                    <div class="loading-spinner" *ngIf="isSearching"></div>
                      <!-- Adressvorschl채ge -->
                    <div class="address-suggestions" *ngIf="addressSuggestions.length > 0" role="listbox" aria-label="Adressvorschl채ge">
                        <div class="suggestion-item" 
                             *ngFor="let suggestion of addressSuggestions"
                             (click)="selectAddress(suggestion)"
                             role="option"
                             tabindex="0"
                             (keydown.enter)="selectAddress(suggestion)">
                            {{ suggestion.display_name }}
                        </div>
                    </div>                    <!-- Hilfstext -->
                    <small class="hint-text" *ngIf="!isSearching && !addressSuggestions.length && newPost.location && newPost.location.length > 0 && !selectedAddress">
                        Mindestens 3 Zeichen eingeben, um die Suche zu starten.
                    </small>
                    <!-- Anzeige bei ausgew채hlter Adresse -->
                    <small class="success-text" *ngIf="selectedAddress">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <path d="M22 4 12 14.01l-3-3"></path>
                        </svg>
                        Adresse mit Geokoordinaten ausgew채hlt
                    </small>
                </div>

                <label for="postDescription">Description:</label>
                <textarea [(ngModel)]="newPost.description" id="postDescription" name="description" rows="5"></textarea>

                <div class="checkbox-group">
                <input [(ngModel)]="newPost.open_to_join" type="checkbox" id="postOpenToJoin" name="open_to_join">
                    <label for="postOpenToJoin">Open to Join</label>
                </div>

                <button class="createButton" (click)="this.createPost()">Create Post</button>
            </form>
        </div>
    }
</div>
